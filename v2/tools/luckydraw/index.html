<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Lucky Draw - Spin the wheel or randomly pick winners from your list">
  <meta property="og:title" content="KVSOVANREACH | Lucky Draw">
  <meta property="og:description" content="A fun tool to randomly pick winners with a spinning wheel.">
  <meta property="og:image" content="/assets/img/pwa/ios/512.png">
  <title>KVSOVANREACH | Lucky Draw</title>

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/assets/img/favicons/favicon.ico">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Common Tools CSS -->
  <link rel="stylesheet" href="../../js/tools-common.css">
  <!-- Lucky Draw CSS -->
  <link rel="stylesheet" href="luckydraw.css">
</head>
<body>
  <!-- Skip to Content -->
  <a href="#luckydraw" class="skip-link">Skip to lucky draw tool</a>

  <!-- Navigation -->
  <nav class="navbar" id="navbar">
    <div class="nav-container">
      <a href="../../tools.html" class="nav-logo">
        <span class="logo-text">KVSOVANREACH</span>
        <span class="logo-divider">|</span>
        <span class="logo-tools">TOOLS</span>
      </a>

      <div class="nav-actions">
        <a href="../../tools.html" class="back-btn" title="Back to Tools">
          <i class="fa-solid fa-arrow-left"></i>
        </a>
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
          <i class="fa-solid fa-moon"></i>
          <i class="fa-solid fa-sun"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="tool-page">
    <div class="container">
      <!-- Lucky Draw Container -->
      <div class="luckydraw-wrapper" id="luckydraw">
        <!-- Tab Navigation -->
        <div class="luckydraw-tabs">
          <button class="luckydraw-tab active" data-tab="wheel">
            <i class="fa-solid fa-dharmachakra"></i>
            <span>Wheel</span>
          </button>
          <button class="luckydraw-tab" data-tab="entries">
            <i class="fa-solid fa-users"></i>
            <span>Entries</span>
          </button>
          <button class="luckydraw-tab" data-tab="settings">
            <i class="fa-solid fa-gear"></i>
            <span>Settings</span>
          </button>
        </div>

        <!-- Main Content Area -->
        <div class="luckydraw-content">
          <div class="luckydraw-main">
            <!-- Wheel Panel -->
            <div class="luckydraw-panel active" id="wheelPanel">
              <div class="panel-header">
                <h2>Spin the Wheel</h2>
                <p>Click SPIN or press Space to pick a random winner</p>
              </div>
              <div class="wheel-layout">
                <div class="wheel-container">
                  <div class="wheel-pointer">
                    <i class="fa-solid fa-caret-down"></i>
                  </div>
                  <canvas id="wheelCanvas"></canvas>
                  <div class="wheel-center">
                    <button type="button" class="spin-btn" id="spinBtn" title="Spin the wheel" disabled>
                      <span>SPIN</span>
                    </button>
                  </div>
                </div>

                <!-- Winner Display -->
                <div class="winner-display" id="winnerDisplay">
                  <div class="winner-content">
                    <i class="fa-solid fa-trophy"></i>
                    <span class="winner-label">Winner</span>
                    <span class="winner-name" id="winnerName">-</span>
                  </div>
                </div>

                <!-- Quick Actions -->
                <div class="wheel-actions">
                  <button class="action-btn-lg" id="pickRandomBtn" title="Pick random without spinning">
                    <i class="fa-solid fa-shuffle"></i>
                    <span>Quick Pick</span>
                  </button>
                  <button class="action-btn-lg" id="resetWheelBtn" title="Reset wheel">
                    <i class="fa-solid fa-rotate-left"></i>
                    <span>Reset</span>
                  </button>
                </div>

                <!-- Entries Count -->
                <div class="entries-info">
                  <span class="entries-count"><span id="entriesCount">0</span> participants</span>
                </div>
              </div>
            </div>

            <!-- Entries Panel -->
            <div class="luckydraw-panel" id="entriesPanel">
              <div class="panel-header">
                <h2>Manage Entries</h2>
                <p>Add, edit, or import participants for the draw</p>
              </div>
              <div class="entries-layout">
                <!-- Input Section -->
                <div class="entries-section">
                  <div class="section-header">
                    <label for="entryInput">Add Entry</label>
                    <div class="section-actions">
                      <button class="action-btn sample-btn" id="sampleBtn" title="Load sample data">
                        <i class="fa-solid fa-flask"></i>
                      </button>
                      <button class="action-btn" id="importBtn" title="Import from text">
                        <i class="fa-solid fa-file-import"></i>
                      </button>
                    </div>
                  </div>
                  <div class="input-group">
                    <input type="text" id="entryInput" placeholder="Enter a name and press Enter..." autocomplete="off">
                    <button class="add-btn" id="addEntryBtn" title="Add entry">
                      <i class="fa-solid fa-plus"></i>
                    </button>
                  </div>
                  <div class="input-info">
                    <span class="input-hint">Press Enter to add, or paste multiple names (one per line)</span>
                  </div>
                </div>

                <!-- Bulk Actions -->
                <div class="bulk-actions">
                  <button class="bulk-btn" id="shuffleBtn">
                    <i class="fa-solid fa-shuffle"></i>
                    <span>Shuffle</span>
                  </button>
                  <button class="bulk-btn danger" id="clearAllBtn">
                    <i class="fa-solid fa-trash"></i>
                    <span>Clear All</span>
                  </button>
                </div>

                <!-- Entries List -->
                <div class="entries-list-section">
                  <div class="section-header">
                    <label>Participants (<span id="entriesCount2">0</span>)</label>
                  </div>
                  <div class="entries-list" id="entriesList">
                    <div class="entries-empty" id="entriesEmpty">
                      <i class="fa-solid fa-user-plus"></i>
                      <p>No entries yet</p>
                      <span>Add participants to start the draw</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Settings Panel -->
            <div class="luckydraw-panel" id="settingsPanel">
              <div class="panel-header">
                <h2>Settings</h2>
                <p>Customize your lucky draw experience</p>
              </div>
              <div class="settings-layout">
                <div class="setting-group">
                  <div class="setting-row">
                    <div class="setting-info">
                      <span class="setting-name">Remove winner after selection</span>
                      <span class="setting-desc">When enabled, winners are removed from the list</span>
                    </div>
                    <label class="toggle-label">
                      <input type="checkbox" id="removeWinnerSetting" checked>
                      <span class="toggle-switch"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-group">
                  <div class="setting-row">
                    <div class="setting-info">
                      <span class="setting-name">Sound effects</span>
                      <span class="setting-desc">Play sounds during spin and winner announcement</span>
                    </div>
                    <label class="toggle-label">
                      <input type="checkbox" id="soundSetting" checked>
                      <span class="toggle-switch"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-group">
                  <div class="setting-row">
                    <div class="setting-info">
                      <span class="setting-name">Confetti celebration</span>
                      <span class="setting-desc">Show confetti animation when winner is selected</span>
                    </div>
                    <label class="toggle-label">
                      <input type="checkbox" id="confettiSetting" checked>
                      <span class="toggle-switch"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-group">
                  <div class="setting-row column">
                    <div class="setting-info">
                      <span class="setting-name">Spin duration</span>
                      <span class="setting-desc">How long the wheel spins before stopping</span>
                    </div>
                    <div class="range-container">
                      <input type="range" id="spinDurationSetting" min="2" max="10" value="5" class="range-input">
                      <span class="range-value"><span id="spinDurationValue">5</span>s</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- History Toggle Button -->
          <button class="history-show-btn" id="historyShowBtn" title="Show history">
            <i class="fa-solid fa-clock-rotate-left"></i>
          </button>

          <!-- History Sidebar -->
          <aside class="history-sidebar" id="historySidebar">
            <div class="history-header">
              <h3><i class="fa-solid fa-clock-rotate-left"></i> Winners</h3>
              <div class="history-actions">
                <button class="history-clear-btn" id="historyClearBtn" title="Clear history">
                  <i class="fa-solid fa-trash"></i>
                </button>
                <button class="history-toggle-btn" id="historyToggleBtn" title="Toggle history">
                  <i class="fa-solid fa-chevron-right"></i>
                </button>
              </div>
            </div>
            <div class="history-list" id="historyList">
              <div class="history-empty" id="historyEmpty">
                <i class="fa-solid fa-inbox"></i>
                <p>No winners yet</p>
                <span>Spin to pick winners</span>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </div>
  </main>

  <!-- History FAB (Mobile) -->
  <button class="history-fab" id="historyFab" title="Show history">
    <i class="fa-solid fa-clock-rotate-left"></i>
    <span class="history-badge" id="historyBadge">0</span>
  </button>

  <!-- History Overlay (Mobile) -->
  <div class="history-overlay" id="historyOverlay"></div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-bottom">
        <p class="footer-copy">&copy; <span id="current-year"></span> Kong Vungsovanreach. All rights reserved.</p>
        <p class="footer-made">Made with <i class="fa-solid fa-heart"></i> in South Korea</p>
      </div>
    </div>
  </footer>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <!-- Keyboard Shortcuts Hint -->
  <div class="shortcuts-hint" id="shortcutsHint">
    <span>Press <kbd>?</kbd> for shortcuts</span>
  </div>

  <!-- Keyboard Shortcuts Modal -->
  <div class="shortcuts-modal" id="shortcutsModal">
    <div class="shortcuts-content">
      <div class="shortcuts-header">
        <h3><i class="fa-solid fa-keyboard"></i> Keyboard Shortcuts</h3>
        <button class="close-shortcuts-btn" id="closeShortcutsBtn">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <div class="shortcuts-body">
        <!-- Actions Section -->
        <div class="shortcuts-group">
          <div class="shortcuts-group-title">Actions</div>
          <div class="shortcut-row">
            <div class="shortcut-keys"><kbd>Space</kbd></div>
            <div class="shortcut-desc">Spin the wheel</div>
          </div>
          <div class="shortcut-row">
            <div class="shortcut-keys"><kbd>R</kbd></div>
            <div class="shortcut-desc">Quick random pick</div>
          </div>
          <div class="shortcut-row">
            <div class="shortcut-keys"><kbd>S</kbd></div>
            <div class="shortcut-desc">Shuffle entries</div>
          </div>
          <div class="shortcut-row">
            <div class="shortcut-keys"><kbd>N</kbd></div>
            <div class="shortcut-desc">Focus input</div>
          </div>
        </div>

        <!-- Navigation Section -->
        <div class="shortcuts-group">
          <div class="shortcuts-group-title">Navigation</div>
          <div class="shortcut-row">
            <div class="shortcut-keys"><kbd>1</kbd><span class="key-separator">-</span><kbd>3</kbd></div>
            <div class="shortcut-desc">Switch tabs</div>
          </div>
          <div class="shortcut-row">
            <div class="shortcut-keys"><kbd>H</kbd></div>
            <div class="shortcut-desc">Toggle history</div>
          </div>
          <div class="shortcut-row">
            <div class="shortcut-keys"><kbd>?</kbd></div>
            <div class="shortcut-desc">Show shortcuts</div>
          </div>
          <div class="shortcut-row">
            <div class="shortcut-keys"><kbd>Esc</kbd></div>
            <div class="shortcut-desc">Close modals</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Import Modal -->
  <div class="import-modal" id="importModal">
    <div class="import-content">
      <div class="import-header">
        <h3><i class="fa-solid fa-file-import"></i> Import Entries</h3>
        <button class="close-import-btn" id="closeImportBtn">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <div class="import-body">
        <textarea id="importTextarea" placeholder="Paste names here (one per line)..."></textarea>
        <div class="import-hint">
          <i class="fa-solid fa-circle-info"></i>
          <span>Each line will be added as a separate entry</span>
        </div>
      </div>
      <div class="import-footer">
        <button class="cancel-btn" id="cancelImportBtn">Cancel</button>
        <button class="confirm-btn" id="confirmImportBtn">
          <i class="fa-solid fa-check"></i>
          <span>Import</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Confetti Container -->
  <div class="confetti-container" id="confettiContainer"></div>

  <!-- Shared Tools JavaScript -->
  <script src="../../js/tools-common.js"></script>
  <!-- Scripts -->
  <script src="luckydraw.js"></script>
</body>
</html>
